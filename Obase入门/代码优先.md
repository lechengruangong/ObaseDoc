在之前的[快速开始](./快速开始.md)和[最佳实践](./最佳实践.md)里,我们一直使用的是数据库表和数据模型类,在这种概念体系下,数据模型类是数据库表的代理,用于承载数据库中的数据.

但我们也可以将思路扭转过来,既然数据模型类和数据库表是一一对应的,那么我们也可以这样看待他们之间的关系:

即数据库表是数据模型类在数据库里的映射.

采用这种思路后,就不再需要特别的关注数据库了,数据库是只是作为类的持久化设施用于存储持久化数据而已.
而且类也不再是数据模型类,类可以定义更多的方法也可以更好地利用面向对象的封装特性将某些属性封装起来,这样的类就成为了领域类.

这种思路称为代码优先设计,之前的先定义数据库表再围绕数据库表来设计数据模型类的思路称为数据库优先设计.

代码优先设计模式主要有以下优点:
1. 开发效率高,聚焦业务核心.开发者不需要在数据库管理工具和代码编辑器之间不断切换上下文.只需要关注如何用代码定义业务实体,而不必花费大量时间编写和维护冗长易错的 QL脚本.
2. 更好地可维护性和可读性.领域模型类是数据库结构的唯一真实来源.要修改表结构,只需修改对应的类即可.这避免了数据库脚本和对象模型不同步的"阻抗失配"问题.
模型类本身就像文档一样清晰.通过阅读类定义,开发者可以立刻理解数据之间的关系(如一对一,一对多),这比查看外键约束的SQL脚本直观得多.
3. 支持流畅的版本控制和迁移
由于所有模型定义都是代码文件,它们可以和其他代码一样纳入版本控制系统.团队成员可以轻松地看到模型变更的历史记录和差异.大多数ORM框架都能根据模型类的变更,自动生成数据库迁移脚本.
4. 更强的类型安全和编译器检查
在代码中使用的是强类型的类，而不是拼写易错的字符串.许多错误(如属性名拼写错误,类型不匹配)在编译阶段就会被发现,而不是在运行时才爆出SQL错误.

在结合Obase之后,开发一个系统的流程就可以变成如下的步骤:
1. 开发领域模型,辨析概念,定义类型.
2. 定义类型的方法,表达业务,建立领域.
3. 将领域模型中的实体和关系配置至Obase对象数据模型,建立基础设施.
4. 基于领域和基础设施开发业务系统.

代码优先设计模式的核心优点是:它让开发者始终以面向对象的思维专注于业务领域模型的构建,从而提升开发效率,代码质量和可维护性,同时利用现代框架自动化了数据库相关的繁琐工作.

代码优先设计模式代表了从"以数据库为中心"到"以应用程序和领域为核心"的现代软件开发范式的转变,Obase致力于在这种开发模式下为开发者带来统一的存储抽象,衷心希望能更好地推进领域驱动开发的推广.