在之前的[快速开始](./快速开始.md)和[最佳实践](./最佳实践.md)里,我们已经了解了Obase是如何通过数据模型类操作数据库的.

而且我们可以注意到,对于使用者而言Obase的模型配置这个部分是处于核心地位的,只有在对数据模型类进行配置之后Obase才能正确的运作.

本篇就将介绍Obase的对象数据模型,对象数据模型是Obase理解调用方对象系统的地图,Obase需要根据对象数据模型来确定对象系统中哪些类和那些关系需要持久化和如何持久化以及如何从数据源中反持久化.

为了达到以上的目标,Obase为对象系统中的对象和对象间关系提出了以下概念:

- 结构化类型,一般而言是将类配置为的Obase对象数据模类型,结构化类型在数据源中一般存储于某张具体的表中.
Obase将结构化类型分为两种,实体型和关联型.对于一个类,如果在概念上表示一个实体的抽象,那么这个类就是实体型.
而一个类在概念上表示实体和实体之间的关系时,这个类就应当是关联型.对于一个关系,如果没有独属于这个关系的属性,那么这个关系就是隐含的,称之为隐式关联型.
自然的,如果有独属于这个关系的属性的关系,就需要为这个关系定义一个类来表示,这个类就是显式关联型.
- 属性,一般而言是将类上的普通([Obase基元类型](../Obase基础知识/Obase基元类型与数据库类型映射.md)或者结构体)属性配置为的Obase对象数据模类型,属性在数据源中一般存储于某张具体表的字段中.
Obase将属性分为两种,类型为[Obase基元类型](../Obase基础知识/Obase基元类型与数据库类型映射.md)的,称之为普通类型.
类型为结构体,但结构体上的[Obase基元类型](../Obase基础知识/Obase基元类型与数据库类型映射.md)想要存储于某个数据源的表字段的,称之为复杂类型.
- 引用元素,一般而言是将类上的引用其他实体型或显式关联型属性配置为的Obase对象数据模类型.
Obase将引用元素分为两种,实体型上引用其他实体型或显式关联型属性的称之为关联引用.
关联型上引用其他实体型的属性称之为关联端.


这三个概念各自有延伸的具体概念,实际使用中基本都只会使用这些具体概念,故只详细介绍这些具体的概念.

- 实体型,对象系统中大部分的类都是实体型,实体型上会定义属性和关联引用.
实体型需要在Obase的对象数据模型中配置为实体型,并且至少配置主键是什么,主键是否自增以及此实体型存储于数据源的哪张表中.
- 显式关联型,有独属于关联的属性时在对象系统中定义的类型就是显式关联型,式关联型,上会定义属性和关联端.
显式关联型需要在Obase的对象数据模型中配置为关联型,并且至少要配置关联端都是什么,关联端实体型的主键在表中存储于哪个字段和此显式关联型存储于哪张表中.
- 隐式关联型,没有独属于关联的属性的关系,直接由一个实体型引用其他实体型时隐含的关联型就是隐式关联型.
隐式关联型需要在Obase的对象数据模型中配置为关联型,并且至少要配置关联端都是什么,关联端实体型的主键在表中存储于哪个字段和此隐式关联型存储于哪张表中.
- 普通属性,类型为[Obase基元类型](../Obase基础知识/Obase基元类型与数据库类型映射.md)的在实体型或者显示关联型上定义的属性称之为普通属性.
普通属性需要在Obase的对象数据模型中配置为属性,一般情况下不需要特别的配置,使用默认的配置即可.
- 复杂属性,类型为结构体的实体型或者显示关联型上定义的属性称之为复杂属性.
复杂属性的类型需要在Obase的对象数据模型中配置复杂类型,此属性使用较少.
- 关联引用,实体型上定义的其他实体型或显式关联型的引用称之为关联引用.
关联引用需要在Obase的对象数据模型中配置为关联引用,一般情况下不需要特别的配置,使用默认的配置即可.
- 关联端,显式关联型或隐式关联型上对其他实体型的引用称之为关联端.
关联端需要在Obase的对象数据模型中配置为关联端,显示关联型可以使用表达式指定关联端,隐式关联型需要使用类型来指定关联端.
关联端至少需要配置关联端的实体型所有的主键在关联型所存储的表中存储于哪个数据的字段.

在了解了这些概念之后,Obase的对象数据模型配置过程就可以理解为以下的三个部分:
1. 将所有的实体型的类型,主键,存储于数据源的哪张表,属性存储于表中哪些字段配置至Obase对象数据模型.
2. 将所有的隐式关联有哪些实体作为关联的端参与,存储于数据源的哪张表,这些关联端的实体类型主键在这张表中存储于哪个数据源字段配置至Obase对象数据模型.
3. 将所有的显式关联的类型,都有哪些实体作为关联的端参与,存储于数据源的哪张表,属性存储于表中哪些字段,这些关联端的实体类型主键在这张表中存储于哪个数据源字段配置至Obase对象数据模型.

当然,每个部分实际配置时各自需要根据具体的情景进行配置,除了这三个部分之外,Obase还有一些功能性的配置如对象更改通知,并发策略之类的配置,这些可以参考Obase基础知识中的具体文章.

而基础的实体和关系的配置,请阅读Obase基础知识中的[Obase的总体配置思路](../Obase基础知识/Obase的总体配置思路.md)和[Obase对象数据模型配置示例](../Obase基础知识/Obase对象数据模型配置示例.md)这两篇文档来深入了解配置过程.